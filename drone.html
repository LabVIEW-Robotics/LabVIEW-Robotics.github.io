---
layout: default
permalink: /parrot-drone/
links:
-
  url: http://ni.com/labview
  name: NI Labview
---
<h2 class="blog-post-title">AR Parrot Drone</h2>
<p>This page shows how to control an AR Parrot drone 
using the myRIO with LabVIEW. The hardware needed includes: 
<ol>
  <li>An AR Parrot Drone</li>
  <li>myRIO 1900</li>
  <li>A computer running LabVIEW</li>
</ol>
</p>
<p>Set up time for this tutorial is about one hour. 
The majority of that time will be spent familiarizing 
yourself with how to control the drone. If you are 
controlling it with the myRIO or a computer, 
you need to change your wifi to the wifi 
hotspot created by the drone.
</p>
<h2 class="blog-post-title">Software</h2>
<p>You will need to install the AR Parrot drone 
toolkit package from the VI Package manager. The 
steps to do this are listed below:
<ul>
  <li>Open VI Package Manager from the Start Menu.</li>
  <li>Find the AR Parrot Drone package.
  <p><img src="/images/drone/vi_package.PNG" style="max-width:100%;" /></p>
  </li>
  <li>Double click the package and select Install.</li>
</ul>
</p>
<p>To confirm that the package has been installed 
open a new LabVIEW VI. Go to the block diagram window, 
right click to show the functions pallete. Under Addons 
there should now be an option for LVH. Under LVH 
there should be options for the Parrot Drone.
</p>
<p><img src="/images/drone/functions.PNG" style="max-width:100%;" /></p>
<h2 class="blog-post-title">A Simple Example</h2>
<p>The first VI for this tutorial is a 
simple control VI, it can be downloaded 
<a href="/drone_control.vi">here</a>. The 
VI is shown below.</p>
<p><img src="/images/drone/drone_control_vi.PNG" style="max-width:100%;" /></p>
<p>Initialize a connection to the drone with 
the Open function. It takes as input a cluster 
containing initilization variables, such as the 
IP address of the drone on the network and 
the maximum hover altitude.</p>
<h2 class="blog-post-title">Control With myRIO</h2>
<p>This section will show how to control 
the AR Drone with the myRIO. The button on 
the myRIO will control the takeoff and landing 
for the drone. You can download the project <a href="/Drone.zip">here</a>. 
Another important feature of this project 
is the use of a deployable buildout of the 
project. This is so that the VI can run without 
a host computer.</p>
<p>The Main VI for the project is shown below:</p>
<p><a href="/images/drone/button_control_vi.PNG">
<img src="/images/drone/button_control_vi.PNG" style="max-width:100%;" />
</a></p>
<p>There are several loops running in parallel. 
The top loop simply makes the LED blink 
so that we have indication the VI is running. 
The next loop is the control loop, there could be 
the situation where the wifi connection to the drone 
has not been made when the VI starts. So the control 
loop will try to connect over and over again 
if this occurs. The third loop sets the takeoff 
global variable which controls takeoff and 
landing.</p>
<h2 class="blog-post-title">Making the VI run on Startup</h2>
<p>Follow these instructions to make the 
VI run on startup.
<ol>
<li>In the project view, right click "Build Specifications"
<p><img src="/images/drone/build_specifications.PNG" style="max-width:100%" /></p>
</li>
<li>Choose New -> Real Time Application</li>
<li>Under the Source Files category move the VI you want to run into the right column
<p><img src="/images/drone/source_files.PNG" style="max-width:100%" /></p>
</li>
</ol>
</p>
